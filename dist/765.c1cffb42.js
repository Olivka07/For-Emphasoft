/*! For license information please see 765.c1cffb42.js.LICENSE.txt */
"use strict";(self.webpackChunkemphasoft=self.webpackChunkemphasoft||[]).push([[765],{887:(e,t,n)=>{n.d(t,{V:()=>u,f:()=>o});var r=n(489),o=(0,r.lh)("Change Auth"),u=(0,r.y$)(!1).on(o,(function(e,t){return t}))},349:(e,t,n)=>{n.d(t,{q:()=>r});var r=n(544)},544:(e,t,n)=>{n.r(t),n.d(t,{$listUsers:()=>x,$users:()=>v,changedSearching:()=>p,clearUsers:()=>a,createUserFx:()=>f,debounceChangedSearching:()=>y,deleteUserFx:()=>d,getUsersFx:()=>l,putUserFx:()=>h,sortAsc:()=>g,sortDesc:()=>w});var r=n(489),o=n(184),u=n(882),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,u){function s(e){try{c(r.next(e))}catch(e){u(e)}}function i(e){try{c(r.throw(e))}catch(e){u(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},i=function(e,t){var n,r,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},c=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},a=(0,r.lh)(),l=(0,r.EH)("Get Users",{handler:function(){return s(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,(0,u.lo)()];case 1:return[2,e.sent()]}}))}))}}),f=(0,r.EH)("Create User",{handler:function(e){return s(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,(0,u.kg)(e)];case 1:return[2,t.sent()]}}))}))}}),h=(0,r.EH)("Put User",{handler:function(e){return s(void 0,[e],void 0,(function(e){var t=e.postUser,n=e.id;return i(this,(function(e){switch(e.label){case 0:return[4,(0,u.vv)({user:t,id:n})];case 1:return[2,e.sent()]}}))}))}}),d=(0,r.EH)("Delete User",{handler:function(e){return s(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,(0,u.hG)(e)];case 1:return t.sent(),[2,e]}}))}))}}),v=(0,r.y$)(null).on(l.doneData,(function(e,t){return t})).on(a,(function(){return null})).on(f.doneData,(function(e,t){return e?c(c([],e,!0),[t],!1):[t]})).on(h.doneData,(function(e,t){return e.map((function(e){return e.id===t.id?t:e}))})).on(d.doneData,(function(e,t){return e.filter((function(e){return e.id!==t}))})),p=(0,r.lh)(),y=(0,o.s)({source:p,timeout:600}),b=(0,r.y$)("");(0,r.XM)({source:y,target:b});var x=(0,r.y$)(null),g=(0,r.lh)(),w=(0,r.lh)();(0,r.XM)({clock:v,target:x}),(0,r.XM)({clock:b,source:v,fn:function(e,t){var n=new RegExp(t,"i");return e.filter((function(e){return n.test(e.username)}))},target:x}),(0,r.XM)({clock:g,source:x,fn:function(e){return Array.from(e.sort((function(e,t){return e.id-t.id})))},target:x}),(0,r.XM)({clock:w,source:x,fn:function(e){return Array.from(e.sort((function(e,t){return t.id-e.id})))},target:x})},765:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(848),o=n(540),u=n(767),s=n(349),i=n(976),c=function(e){var t=e.children,n=e.auth;return(0,r.jsxs)("header",{className:"header",children:[(0,r.jsx)("div",{className:"header__logo",children:"LogoApp"}),(0,r.jsxs)("nav",{className:"header__nav",children:[!n&&(0,r.jsx)("button",{children:(0,r.jsx)(i.N_,{to:"/login",children:"Log in"})}),t]})]})},a=n(887),l=n(544),f=function(){return(0,r.jsx)("button",{onClick:function(){(0,a.f)(!1),localStorage.removeItem("token"),(0,l.clearUsers)()},children:"Log out"})},h=n(721),d="rKDzJiWa";const v=function(e){var t=e.user,n=t.last_login?new Date(Date.parse(t.last_login)):null;return(0,r.jsxs)("div",{className:"TqRVh39q",children:[(0,r.jsx)("div",{className:"EVt7UxGH",children:"".concat(t.is_superuser?"⭐(SU)":""," ").concat(""!==t.first_name?t.first_name:"No firstname"," ").concat(""!==t.last_name?t.last_name:"No lastname")}),(0,r.jsx)("div",{className:d,children:t.username}),(0,r.jsx)("div",{className:d,children:"".concat(t.is_active?"Active":"No Active")}),n&&(0,r.jsx)("div",{className:d,children:"Last login: ".concat(n.toLocaleDateString()," ").concat(n.toLocaleTimeString())})]})};var p="AsKVtcCy",y=function(){var e=(0,o.useState)(""),t=e[0],n=e[1];return(0,r.jsx)("input",{className:"tAR_sn4q",value:t,onChange:function(e){n(e.target.value),(0,l.changedSearching)(e.target.value)},type:"text",placeholder:"Search..."})};const b=function(e){var t=e.sort;return(0,r.jsx)("button",{className:p,onClick:"asc"===t?function(){"asc"===t?(0,l.sortAsc)():(0,l.sortDesc)()}:function(){return(0,l.sortDesc)()},children:"asc"===t?"⬆":"⬇"})};var x=function(){var e=(0,u.Zp)();return(0,r.jsx)("button",{className:p,onClick:function(){e("/user-form")},children:"New"})},g=function(){var e=(0,u.Zp)(),t=(0,h.e3)(l.$listUsers);return null!==t?(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",zIndex:0},children:[(0,r.jsx)("h1",{children:"List Users"}),(0,r.jsx)(y,{}),(0,r.jsxs)("div",{className:"users__container",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(b,{sort:"asc"}),(0,r.jsx)(b,{sort:"desc"})]}),(0,r.jsx)(x,{})]}),(0,r.jsx)("ul",{className:"users__container__list",children:t.map((function(t){return(0,r.jsx)("li",{onClick:function(){return e("/user-form/".concat(t.id))},children:(0,r.jsx)(v,{user:t})},t.id)}))})]}):(0,r.jsx)("div",{style:{textAlign:"center"},children:"To view users you must log in"})},w=n(798);const m=function(){var e=(0,h.e3)(a.V),t=(0,h.e3)(s.q.getUsersFx.pending);return(0,o.useEffect)((function(){localStorage.getItem("token")&&(s.q.getUsersFx(),(0,a.f)(!0))}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{auth:e,children:e&&(0,r.jsx)(f,{})}),!t&&(0,r.jsx)(g,{})||(0,r.jsx)(w.R,{}),(0,r.jsx)(u.sv,{})]})}},882:(e,t,n)=>{n.d(t,{kg:()=>h,hG:()=>v,wz:()=>f,lo:()=>l,iD:()=>a,vv:()=>d});var r=n(266),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,u){function s(e){try{c(r.next(e))}catch(e){u(e)}}function i(e){try{c(r.throw(e))}catch(e){u(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},s=new(function(){function e(){this.axios=r.A.create({baseURL:"https://test-assignment.emphasoft.com",headers:{"Content-Type":"application/json"}}),this.axios.interceptors.request.use((function(e){return localStorage.getItem("token")&&(e.headers.Authorization="Token ".concat(localStorage.getItem("token"))),e}))}return e.prototype.get=function(e){return o(this,arguments,void 0,(function(e,t){return void 0===t&&(t={}),u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.axios.get(e,t)];case 1:return[2,n.sent().data];case 2:throw n.sent();case 3:return[2]}}))}))},e.prototype.post=function(e,t){return o(this,arguments,void 0,(function(e,t,n){return void 0===n&&(n={}),u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.axios.post(e,t,n)];case 1:return[2,r.sent().data];case 2:throw r.sent();case 3:return[2]}}))}))},e.prototype.put=function(e,t){return o(this,arguments,void 0,(function(e,t,n){return void 0===n&&(n={}),u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.axios.put(e,t,n)];case 1:return[2,r.sent().data];case 2:throw r.sent();case 3:return[2]}}))}))},e.prototype.patch=function(e,t){return o(this,arguments,void 0,(function(e,t,n){return void 0===n&&(n={}),u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.axios.patch(e,t,n)];case 1:return[2,r.sent().data];case 2:throw r.sent();case 3:return[2]}}))}))},e.prototype.delete=function(e){return o(this,arguments,void 0,(function(e,t){return void 0===t&&(t={}),u(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.axios.delete(e,t)];case 1:return[2,n.sent().data];case 2:throw n.sent();case 3:return[2]}}))}))},e}()),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,u){function s(e){try{c(r.next(e))}catch(e){u(e)}}function i(e){try{c(r.throw(e))}catch(e){u(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,i[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},a=function(e){return i(void 0,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,s.post("/api/v1/login/",e)];case 1:return t=n.sent().token,localStorage.setItem("token",t),[2]}}))}))},l=function(){return i(void 0,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,s.get("/api/v1/users/")];case 1:return[2,e.sent()]}}))}))},f=function(e){return i(void 0,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,s.get("/api/v1/users/".concat(e))];case 1:return[2,t.sent()]}}))}))},h=function(e){return i(void 0,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,s.post("/api/v1/users/",e)];case 1:return[2,t.sent()]}}))}))},d=function(e){return i(void 0,[e],void 0,(function(e){var t=e.user,n=e.id;return c(this,(function(e){switch(e.label){case 0:return[4,s.put("/api/v1/users/".concat(n),t)];case 1:return[2,e.sent()]}}))}))},v=function(e){return i(void 0,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return[4,s.delete("/api/v1/users/".concat(e))];case 1:return t.sent(),[2]}}))}))}},798:(e,t,n)=>{n.d(t,{R:()=>o});var r=n(848),o=function(){return(0,r.jsx)("div",{children:"Loading"})}},63:(e,t,n)=>{var r=n(540),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},u=r.useState,s=r.useEffect,i=r.useLayoutEffect,c=r.useDebugValue;function a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=u({inst:{value:n,getSnapshot:t}}),o=r[0].inst,l=r[1];return i((function(){o.value=n,o.getSnapshot=t,a(o)&&l({inst:o})}),[e,n,t]),s((function(){return a(o)&&l({inst:o}),e((function(){a(o)&&l({inst:o})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},940:(e,t,n)=>{var r=n(540),o=n(888),u="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=o.useSyncExternalStore,i=r.useRef,c=r.useEffect,a=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var f=i(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=a((function(){function e(e){if(!c){if(c=!0,s=e,e=r(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return i=t}return i=e}if(t=i,u(s,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(s=e,i=n)}var s,i,c=!1,a=void 0===n?null:n;return[function(){return e(t())},null===a?void 0:function(){return e(a())}]}),[t,n,r,o]);var d=s(e,f[0],f[1]);return c((function(){h.hasValue=!0,h.value=d}),[d]),l(d),d}},888:(e,t,n)=>{e.exports=n(63)},242:(e,t,n)=>{e.exports=n(940)},721:(e,t,n)=>{n.d(t,{e3:()=>i});var r=n(540),o=n(489),u=n(242),s=n(888);function i(e,t){return function(e,t){const n=o.is.unit(e);let u={};n?u={unit:e}:"@@unitShape"in e?"function"==typeof e["@@unitShape"]?u=e["@@unitShape"]():c("expect @@unitShape to be a function"):u=e;const s=Array.isArray(u),i=r.useRef({stale:1,justSubscribed:0,scope:t}),[l,h,d,v,p]=r.useMemo((()=>{i.current.stale=1;const e=Array.isArray(u)?[]:{},r=[],s=[],a=[],l=[];for(const i in u){if(!{}.hasOwnProperty.call(u,i))continue;const f=u[i];o.is.unit(f)||c(`expect useUnit ${n?"argument":`value in key "${i}"`} to be a unit`),o.is.event(f)||o.is.effect(f)?(e[i]=t?(0,o.GY)(f,{scope:t}):f,a.push(i),l.push(f)):(e[i]=null,r.push(i),s.push(f))}return[e,r,s,a,l]}),[i,t,...Object.keys(u),...Object.values(u)]),y=r.useRef({value:l,storeKeys:h,eventKeys:v,eventValues:p}),b=r.useCallback((e=>{const n=i.current;return n.justSubscribed=1,(0,o.AX)({unit:d,fn:()=>{n.stale||(n.stale=1,e())},scope:t,batch:1})}),[d,t,y,i]),x=r.useCallback((()=>{const e=y.current,r=i.current;let o,u=0;const c=e.value,a=e.storeKeys,b=e.eventKeys,x=e.eventValues,g=t!==r.scope;if(r.stale||r.justSubscribed||g){u=!r.justSubscribed||g,o=s?[...l]:{...l},a.length===h.length&&b.length===v.length||(u=1);for(let e=0;e<h.length;e++){const n=f(d[e],t),r=h[e];u||(u=a.includes(r)?c[r]!==n:1),o[r]=n}for(let e=0;e<v.length;e++){const t=p[e],n=v[e];u||(u=b.includes(n)?x[b.indexOf(n)]!==t:1)}}return u&&(e.value=o),e.storeKeys=h,e.eventKeys=v,e.eventValues=p,r.stale=0,r.justSubscribed=!u,r.scope=t,n?e.value.unit:e.value}),[b,d,p,t,y,i]);return a(b,x,x)}(e,function(e){const t=r.useContext(h);return e&&!t&&c("No scope found, consider adding <Provider> to app root"),t}(null==t?void 0:t.forceScope))}const c=e=>{throw Error(e)},{useSyncExternalStore:a}=("undefined"!=typeof window?r.useLayoutEffect:r.useEffect,s),{useSyncExternalStoreWithSelector:l}=u,f=(e,t)=>t?t.getState(e):e.getState(),h=r.createContext(null),{Provider:d}=h}}]);