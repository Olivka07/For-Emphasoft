"use strict";(self.webpackChunkemphasoft=self.webpackChunkemphasoft||[]).push([[790],{790:(e,n,t)=>{t.r(n),t.d(n,{default:()=>m});var r=t(848),a=t(540),s=t(296),i=t(892),u=t(181),c=t(767),o=t(762),l=t(996),f=t(882),d=t(798),v=t(544),h=function(e,n,t,r){return new(t||(t=Promise))((function(a,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function u(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,u)}c((r=r.apply(e,n||[])).next())}))},p=function(e,n){var t,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(u){return function(c){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&u[0]?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){i.label=u[1];break}if(6===u[0]&&i.label<a[1]){i.label=a[1],a=u;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(u);break}a[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],r=0}finally{t=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},g=function(e){var n=e.toggle,t=e.id,s=function(){var e=(0,a.useState)(!1),n=e[0],t=e[1];return{loading:n,changeLoading:function(e){t(e)}}}(),i=s.changeLoading,u=s.loading,g=(0,a.useState)(),m=g[0],x=g[1],b=(0,a.useState)(""),y=b[0],j=b[1],w=(0,a.useState)(""),k=w[0],_=w[1],C=(0,a.useState)(""),S=C[0],E=C[1],N=(0,a.useState)(""),A=N[0],F=N[1],H=(0,a.useState)(!1),L=H[0],J=H[1],R=(0,c.Zp)();(0,a.useEffect)((function(){t&&h(void 0,void 0,void 0,(function(){var e,r;return p(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),i(!0),[4,(0,f.wz)(Number(t))];case 1:return e=a.sent(),j(e.username),E(e.first_name),F(e.last_name),J(e.is_active),i(!1),[3,3];case 2:return r=a.sent(),n(r),i(!1),[3,3];case 3:return[2]}}))}))}),[]);var D=function(e){_(e.target.value)},P=function(e){return h(void 0,void 0,void 0,(function(){var r;return p(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),e.preventDefault(),t?[3,2]:(i(!0),[4,(0,v.createUserFx)({username:y,first_name:S,is_active:L,last_name:A,password:k})]);case 1:return a.sent(),i(!1),R("/"),[3,3];case 2:R("/user-form/".concat(t,"/valid")),a.label=3;case 3:return[3,5];case 4:return r=a.sent(),i(!1),n("Error: ".concat(JSON.stringify(r.response.data))),[3,5];case 5:return[2]}}))}))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.sv,{context:{username:y,password:k,first_name:S,last_name:A,is_active:L,changed:m,changePassword:D,id:t,toggle:n}}),(0,r.jsxs)("form",{className:"form",children:[(0,r.jsx)("h2",{children:t?"Change user":"Create user"}),u&&(0,r.jsx)(d.R,{})||(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{title:"username",value:y,changeHandler:function(e){j(e.target.value)}}),!t&&(0,r.jsx)(o.A,{type:"password",title:"password",value:k,changeHandler:D}),(0,r.jsx)(o.A,{title:"first_name",value:S,changeHandler:function(e){E(e.target.value)}}),(0,r.jsx)(o.A,{title:"last_name",value:A,changeHandler:function(e){F(e.target.value)}}),(0,r.jsx)(o.A,{title:"is_active",value:L,type:"checkbox",changeHandler:function(e){J(e.target.checked)}}),(0,r.jsxs)("div",{className:"form__buttons",children:[(0,r.jsx)(l.p,{onClick:function(e){P(e),x(!0)},text:t?"Change":"Register",type:"submit"}),t&&(0,r.jsx)(l.p,{onClick:function(e){P(e),x(!1)},text:"Delete",type:"submit",attention:!0})||(0,r.jsx)(r.Fragment,{}),(0,r.jsx)(l.p,{onClick:function(){R("/")},text:"Cancel",type:"reset"})]})]})]})]})};const m=function(){var e,n=(0,c.g)().id,t=(0,u.J)(),o=t.toggle,l=t.visible,f=(0,c.Zp)();function d(e){("Escape"===e.key||"Esc"===e.key)&&f("../")}return(0,a.useEffect)((function(){return document.addEventListener("keydown",d),function(){document.removeEventListener("keydown",d)}}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Q,{visible:l}),(0,r.jsx)(s.a,{children:(0,r.jsx)("div",{children:(0,r.jsx)(g,{id:null!==(e=Number(n))&&void 0!==e?e:void 0,toggle:o})})})]})}},181:(e,n,t)=>{t.d(n,{J:()=>a});var r=t(540),a=function(){var e=(0,r.useState)(null),n=e[0],t=e[1];return(0,r.useEffect)((function(){null!==n&&setTimeout((function(){t(null)}),5e3)}),[n]),{visible:n,toggle:function(e){t(e)}}}},798:(e,n,t)=>{t.d(n,{R:()=>a});var r=t(848),a=function(){return(0,r.jsx)("div",{children:"Loading"})}},892:(e,n,t)=>{t.d(n,{Q:()=>a});var r=t(848),a=function(e){var n=e.visible;return(0,r.jsx)("div",{className:"yAYRl28C "+(null!==n?"DGgXiMdU":""),children:n})}},296:(e,n,t)=>{t.d(n,{a:()=>s});var r=t(848),a=t(767),s=function(e){var n=e.children,t=(0,a.Zp)();return(0,r.jsx)("div",{className:"M8khYJrm",onClick:function(){return t("/")},children:(0,r.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"VFilokII",children:n})})}}}]);